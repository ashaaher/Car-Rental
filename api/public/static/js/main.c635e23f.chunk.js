(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{220:function(e,t,a){e.exports=a(419)},225:function(e,t,a){},419:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(21),i=a.n(c),o=(a(225),a(32)),s=a(475),l=a(7),u=a(14),m=a(57),p=a(11),h=a(15),d=a(16),v=a(18),f=a(17),g=a(123),b=Object(p.withOktaAuth)(function(e){Object(v.a)(a,e);var t=Object(f.a)(a);function a(e){return Object(h.a)(this,a),t.call(this,e)}return Object(d.a)(a,[{key:"render",value:function(){return this.props.authState.isPending?r.a.createElement("div",null,"Loading..."):r.a.createElement(g.a,{variant:"h4",align:"center",component:"h3"},"Welcome to Car Rental Application")}}]),a}(n.Component)),E=a(56),y=a(86),k=a.n(y),O={url:"https://dev-221342.okta.com",issuer:"https://dev-221342.okta.com/oauth2/default",redirect_uri:window.location.origin+"/implicit/callback",client_id:"0oa3767vj8XG8KEa3357",cookies:{secure:!1}},j=a(455),S=a(480),x=a(459),w=a(460),C=Object(l.a)((function(e){return{card:{width:"90%",maxWidth:500},cardContent:{display:"flex",flexDirection:"column",maxWidth:500,margin:"auto"},cardField:{marginTop:e.spacing(4)},marginTop:{marginTop:e.spacing(3)}}}))((function(e){var t=e.issuer,a=e.classes,c=Object(p.useOktaAuth)().authService,i=Object(n.useState)(),o=Object(E.a)(i,2),s=o[0],l=o[1],m=Object(n.useState)(),h=Object(E.a)(m,2),d=h[0],v=h[1],f=Object(n.useState)(),b=Object(E.a)(f,2),y=b[0],C=b[1];return s?(c.redirect({sessionToken:s}),null):r.a.createElement("form",{className:a.root,onSubmit:function(e){e.preventDefault(),new k.a({issuer:t,pkce:!1,cookies:O.cookies}).signIn({username:d,password:y}).then((function(e){return l(e.sessionToken)})).catch((function(e){return console.log("Found an error",e)}))}},r.a.createElement(j.a,{className:a.cardContent},r.a.createElement(g.a,{variant:"h5",component:"h3"},"Car Rental Application"),r.a.createElement(S.a,{id:"username",label:"Username",value:d,onChange:function(e){v(e.target.value)}}),r.a.createElement(S.a,{id:"password",type:"password",label:"Password",value:y,onChange:function(e){C(e.target.value)}}),r.a.createElement(x.a,null,r.a.createElement(w.a,{variant:"contained",color:"primary",disableElevation:!0,type:"submit"},"Login"),r.a.createElement(w.a,{variant:"contained",component:u.Link,to:"/register",disableElevation:!0},"Register"))))})),T=function(e){var t=e.issuer,a=Object(p.useOktaAuth)().authState;return a.isPending?r.a.createElement("div",null,"Loading..."):a.isAuthenticated?r.a.createElement(m.c,{to:{pathname:"/"}}):r.a.createElement(C,{issuer:t})},N=a(8),A=a.n(N),F=a(13),L=a(61),B=a(64);function I(){return(I=Object(F.a)(A.a.mark((function e(t,a){var n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,Object(B.a)({headers:{"Content-Type":"application/json",Authorization:"Basic YWRtaW46YWRtaW4="}},a));case 3:if((n=e.sent).ok){e.next=10;break}return e.t0=Error,e.next=8,n.text();case 8:throw e.t1=e.sent,new e.t0(e.t1);case 10:return e.abrupt("return",n.json());case 13:throw e.prev=13,e.t2=e.catch(0),new Error(e.t2);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function D(e){return Object.keys(e).map((function(t){return{propName:t,value:e[t]}}))}var V=function(e,t){return I.apply(this,arguments)},M=a(483),R=a(461),P=a(463),_=a(462),H=a(464),U=a(24),z=a(208),G=a.n(z),W=Object(U.a)(Object(U.b)("id","setId",G.a),Object(l.a)((function(e){return{snackbarContent:{backgroundColor:e.palette.error.dark},message:{display:"flex",alignItems:"center"},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing(1)}}})))((function(e){var t=e.id,a=e.message,n=e.onClose,c=e.classes;return r.a.createElement(M.a,{open:!0,autoHideDuration:6e3,onClose:n},r.a.createElement(R.a,{className:"".concat(c.margin," ").concat(c.snackbarContent),"aria-describedby":t,message:r.a.createElement("span",{id:t,className:c.message},r.a.createElement(_.a,{className:"".concat(c.icon," ").concat(c.iconVariant)}),a),action:[r.a.createElement(P.a,{key:"close","aria-label":"Close",color:"inherit",onClick:n},r.a.createElement(H.a,{className:c.icon}))]}))})),J=function(){return r.a.createElement("div",{style:{position:"absolute",top:"50%",left:"50%"}},r.a.createElement("h4",null,"Loading..."))},Y=Object(p.withOktaAuth)(function(e){Object(v.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={loading:!0,error:null,user:null},n.getCurrentUser=n.getCurrentUser.bind(Object(L.a)(n)),n}return Object(d.a)(a,[{key:"getCurrentUser",value:function(){var e=Object(F.a)(A.a.mark((function e(){var t=this;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.authService.getUser().then((function(e){return t.setState({user:e,loading:!1})}));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getCurrentUser()}},{key:"deleteUser",value:function(){var e=Object(F.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V("/api/users/".concat(this.state.user.sub),{method:"DELETE"});case 3:this.props.authService.logout(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),this.setState({error:e.t0});case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;if(this.props.authState.isPending||this.state.loading)return r.a.createElement(J,null);if(!this.state.user)return null;var t=new Date(1e3*this.state.user.updated_at);return r.a.createElement("section",{className:"user-profile"},r.a.createElement(j.a,null,r.a.createElement(g.a,{color:"textSecondary",gutterBottom:!0},"Name"),r.a.createElement(g.a,{variant:"h5",gutterBottom:!0},this.state.user.name),r.a.createElement(g.a,{color:"textSecondary",gutterBottom:!0},"Email"),r.a.createElement(g.a,{variant:"h5",gutterBottom:!0},this.state.user.email),r.a.createElement(g.a,{color:"textSecondary",gutterBottom:!0},"User Since"),r.a.createElement(g.a,{variant:"h5",gutterBottom:!0},t.toLocaleString()),r.a.createElement(g.a,{color:"textSecondary",gutterBottom:!0},"Membership Valid Upto"),r.a.createElement(g.a,{variant:"h5",gutterBottom:!0},new Date(t.setMonth(t.getMonth()+6)).toLocaleString()),r.a.createElement(x.a,null,r.a.createElement(w.a,{variant:"contained",onClick:function(){e.deleteUser()}},"Cancel Subscription"))),this.state.error&&r.a.createElement(W,{onClose:function(){return e.setState({error:null})},message:this.state.error.message}))}}]),a}(r.a.Component)),$=a(465),q=a(10),K=function(e){return e?void 0:"Required"},X=function(e){return void 0!==e&&isNaN(e)?"Must be a number":void 0},Q=function(e){return function(t){return isNaN(t)||t>=e?void 0:"Should be greater than ".concat(e)}},Z=function(e){return function(t){return isNaN(t)||t<=e?void 0:"Should be less than ".concat(e)}};function ee(e){return new RegExp("^[0-9]{16}$").test(e)&&function(e){for(var t=0,a=0;a<e.length;a++){var n=parseInt(e.substr(a,1));a%2==0&&(n*=2)>9&&(n=1+n%10),t+=n}return t%10==0}(e)?void 0:"Invalid Credit Card Number"}var te=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return function(e){return t.reduce((function(t,a){return t||a(e)}),void 0)}},ae=Object(l.a)((function(e){return{modalCard:{width:"60%",maxWidth:800,margin:"auto"},modalCardContent:{display:"flex",flexDirection:"column"},marginTop:{marginTop:e.spacing(2)}}}))(Object(p.withOktaAuth)(function(e){Object(v.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={sessionToken:null,error:null},n.oktaAuth=new k.a({issuer:O.issuer,pkce:!1,cookies:O.cookies}),n.checkAuthentication=n.checkAuthentication.bind(Object(L.a)(n)),n.checkAuthentication(),n.handleSubmit=n.handleSubmit.bind(Object(L.a)(n)),n}return Object(d.a)(a,[{key:"checkAuthentication",value:function(){var e=Object(F.a)(A.a.mark((function e(){var t;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.authService.getIdToken();case 2:(t=e.sent)&&this.setState({sessionToken:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){this.checkAuthentication()}},{key:"handleSubmit",value:function(){var e=Object(F.a)(A.a.mark((function e(t){var a=this;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.password===t.repeatPassword){e.next=3;break}return this.setState({error:{message:"Passwords don't match"}}),e.abrupt("return");case 3:fetch("/api/users",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){if(!e.ok)throw new Error("Registration failed");a.oktaAuth.signIn({username:t.email,password:t.password}).then((function(e){return a.setState({sessionToken:e.sessionToken})}))})).catch((function(e){a.setState({error:e})}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.classes;return this.state.sessionToken?(this.props.authService.redirect({sessionToken:this.state.sessionToken}),null):r.a.createElement(q.b,{onSubmit:this.handleSubmit},(function(a){var n=a.handleSubmit;return r.a.createElement($.a,{className:t.modalCard},r.a.createElement("form",{onSubmit:n},r.a.createElement(g.a,{variant:"h5"},"Registration"),r.a.createElement(j.a,{className:t.modalCardContent},r.a.createElement(q.a,{name:"email",validate:K},(function(e){var t=e.input,a=e.meta;return r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,Object.assign({label:"Email"},t)),a.error&&a.touched&&r.a.createElement("span",{style:{color:"red"}},a.error))})),r.a.createElement(q.a,{name:"firstName",validate:K},(function(e){var t=e.input,a=e.meta;return r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,Object.assign({label:"First Name"},t)),a.error&&a.touched&&r.a.createElement("span",{style:{color:"red"}},a.error))})),r.a.createElement(q.a,{name:"lastName",validate:K},(function(e){var t=e.input,a=e.meta;return r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,Object.assign({label:"Last Name"},t)),a.error&&a.touched&&r.a.createElement("span",{style:{color:"red"}},a.error))})),r.a.createElement(q.a,{name:"password",validate:K},(function(e){var t=e.input,a=e.meta;return r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,Object.assign({label:"Password",type:"password"},t)),a.error&&a.touched&&r.a.createElement("span",{style:{color:"red"}},a.error))})),r.a.createElement(q.a,{name:"repeatPassword",validate:K},(function(e){var t=e.input,a=e.meta;return r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,Object.assign({label:"Confirm Password",type:"password"},t)),a.error&&a.touched&&r.a.createElement("span",{style:{color:"red"}},a.error))})),r.a.createElement(q.a,{name:"address",validate:K},(function(e){var t=e.input,a=e.meta;return r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,Object.assign({label:"Address",multiline:!0,rows:4},t)),a.error&&a.touched&&r.a.createElement("span",{style:{color:"red"}},a.error))})),r.a.createElement(q.a,{name:"licenceNumber",validate:K},(function(e){var t=e.input,a=e.meta;return r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,Object.assign({label:"Driving Licence Number"},t)),a.error&&a.touched&&r.a.createElement("span",{style:{color:"red"}},a.error))})),r.a.createElement(q.a,{name:"stateOfResidence",validate:K},(function(e){var t=e.input,a=e.meta;return r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,Object.assign({label:"Driving Licence State"},t)),a.error&&a.touched&&r.a.createElement("span",{style:{color:"red"}},a.error))})),r.a.createElement(q.a,{name:"nameOnCard",validate:K},(function(e){var t=e.input,a=e.meta;return r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,Object.assign({label:"Name on Card"},t)),a.error&&a.touched&&r.a.createElement("span",{style:{color:"red"}},a.error))})),r.a.createElement(q.a,{name:"cardNumber",validate:te(K,X,ee)},(function(e){var t=e.input,a=e.meta;return r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,Object.assign({label:"Card Number"},t)),a.error&&a.touched&&r.a.createElement("span",{style:{color:"red"}},a.error))})),r.a.createElement(q.a,{name:"cvv",validate:te(K,X)},(function(e){var t=e.input,a=e.meta;return r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,Object.assign({label:"CVV"},t)),a.error&&a.touched&&r.a.createElement("span",{style:{color:"red"}},a.error))})),r.a.createElement(q.a,{name:"expirationDate",validate:K},(function(e){var t=e.input,a=e.meta;return r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,Object.assign({label:"Expiration Date (MM/YY)"},t)),a.error&&a.touched&&r.a.createElement("span",{style:{color:"red"}},a.error))}))),r.a.createElement(x.a,null,r.a.createElement(w.a,{variant:"contained",color:"primary",disableElevation:!0,type:"submit"},"Register")),e.state.error&&r.a.createElement(W,{onClose:function(){return e.setState({error:null})},message:e.state.error.message})))}))}}]),a}(r.a.Component))),ne=a(211),re=a(158),ce=a(458),ie=a(424),oe=a(467),se=a(477),le=a(466),ue=a(93),me=a.n(ue),pe=(a(195),function(e){Object(v.a)(a,e);var t=Object(f.a)(a);function a(e){return Object(h.a)(this,a),t.call(this,e)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.onSearch,n=e.locations;return r.a.createElement(q.b,{initialValues:{locationId:"all"},onSubmit:a},(function(e){var a=e.handleSubmit;return r.a.createElement("form",{onSubmit:a},r.a.createElement(j.a,{className:t.modalCardContent},r.a.createElement(q.a,{name:"searchText",validate:K},(function(e){var a=e.input,n=e.meta;return r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,Object.assign({className:t.modalField,label:"Name of the vehicle"},a)),n.error&&n.touched&&r.a.createElement("span",{style:{color:"red"}},"*"))})),r.a.createElement(q.a,{name:"locationId"},(function(e){var a=e.input;return r.a.createElement(r.a.Fragment,null,r.a.createElement(se.a,Object.assign({className:t.modalField,labelId:"demo-simple-select-label",id:"demo-simple-select",autoFocus:!0},a),n.map((function(e){return r.a.createElement(le.a,{value:e._id},e.name)}))))})),r.a.createElement(q.a,{name:"startTime",validate:K},(function(e){var a=e.input,n=e.meta;return r.a.createElement(r.a.Fragment,null,r.a.createElement(me.a,Object.assign({className:t.dateInput,selected:a.value,showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:60,timeCaption:"time",dateFormat:"MMMM d, yyyy h:mm aa",placeholderText:"Select pickup time"},a)),n.error&&n.touched&&r.a.createElement("span",{style:{color:"red"}},"*"))})),r.a.createElement(q.a,{name:"endTime",validate:K},(function(e){var a=e.input,n=e.meta;return r.a.createElement(r.a.Fragment,null,r.a.createElement(me.a,Object.assign({className:t.dateInput,selected:a.value,showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:60,timeCaption:"time",dateFormat:"MMMM d, yyyy h:mm aa",placeholderText:"Select return time"},a)),n.error&&n.touched&&r.a.createElement("span",{style:{color:"red"}},"*"))})),r.a.createElement(w.a,{variant:"contained",className:t.button,size:"small",color:"primary",type:"submit"},"Search")))}))}}]),a}(r.a.Component)),he=Object(U.a)(p.withOktaAuth,m.o,Object(l.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},modalCard:{width:"60%",maxWidth:800},modalCardContent:{display:"flex",flexDirection:"row"},marginTop:{marginTop:e.spacing(2)},modalField:{width:"25%",marginLeft:"20px"},dateInput:{marginLeft:"20px",textAlign:"center",height:"35px",marginTop:"15px",fontSize:"14px"},button:{marginLeft:"20px"}}})))(pe),de=function(e){Object(v.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={loading:!0,locations:[],vehicles:[],error:null,startTime:null,endTime:null},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.getInitialData()}},{key:"getInitialData",value:function(){var e=Object(F.a)(A.a.mark((function e(){var t;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V("/api/locations",{method:"GET"});case 3:t=e.sent,this.setState({loading:!1,locations:t}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.setState({loading:!1,error:e.t0});case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"getVehicles",value:function(){var e=Object(F.a)(A.a.mark((function e(t){var a,n,r,c;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=t.startTime,n=t.endTime,!(a>n)){e.next=4;break}throw new Error("Start time cannot be earlier than return time");case 4:if(!(Math.floor(Math.abs(a-n)/36e5)>72)){e.next=6;break}throw new Error("Cannot book for more than 72 hours");case 6:return r={search:{}},t.searchText&&(r.search.searchText=t.searchText),t.locationId&&"all"!==t.locationId&&(r.search.locationId=t.locationId),e.next=11,V("/api/vehicles/search",{method:"POST",body:JSON.stringify(r)});case 11:c=e.sent,this.setState({vehicles:c,startTime:a,endTime:n}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),this.setState({error:e.t0});case 18:case"end":return e.stop()}}),e,this,[[0,15]])})));return function(t){return e.apply(this,arguments)}}()},{key:"bookVehicle",value:function(){var e=Object(F.a)(A.a.mark((function e(t){var a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Selected vehicle will be booked for time period specified, Are you sure?")){e.next=22;break}if(e.prev=1,!this.state.startTime||!this.state.endTime){e.next=16;break}if(!this.props.authService){e.next=9;break}return e.next=6,this.props.authService.getUser();case 6:e.t0=e.sent,e.next=10;break;case 9:e.t0=null;case 10:return a=e.t0,e.next=13,V("/api/bookings",{method:"POST",body:JSON.stringify({vehicleId:t._id,userId:a.sub,startTime:this.state.startTime.toISOString(),endTime:this.state.endTime.toISOString()})});case 13:alert("Booking successfully done, Please check your current booking page"),e.next=17;break;case 16:this.setState({error:{message:"Please select correct pickup and dropoff time"}});case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(1),this.setState({error:{message:"Error occured while booking the vehicle, make sure you cancel the previous booking or Please try again"}});case 22:case"end":return e.stop()}}),e,this,[[1,19]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;if(this.props.authState.isPending||this.state.loading)return r.a.createElement(J,null);var t=this.props.classes;return r.a.createElement("div",{className:t.mainContainer},r.a.createElement(he,{locations:[{_id:"all",name:"All Locations"}].concat(Object(ne.a)(this.state.locations)),onSearch:function(t){e.getVehicles(t)}}),this.state.vehicles.length>0?r.a.createElement(re.a,{elevation:1,className:t.posts},r.a.createElement(ce.a,null,this.state.vehicles.map((function(t){var a=e.state.locations.find((function(e){return e._id===t.locationId}));return r.a.createElement(ie.a,{key:t._id},r.a.createElement(oe.a,{primary:t.make,secondary:t.model}),r.a.createElement(oe.a,{secondary:a?a.name:""}),r.a.createElement(w.a,{size:"small",color:"primary",onClick:function(){e.bookVehicle(t)}},"Book"))})))):!this.state.loading&&r.a.createElement(g.a,{variant:"subtitle1"},"No vehicles to display for selected search options"),this.state.error&&r.a.createElement(W,{onClose:function(){return e.setState({error:null})},message:this.state.error.message}))}}]),a}(n.Component),ve=Object(U.a)(p.withOktaAuth,m.o,Object(l.a)((function(e){return{mainContainer:{margin:e.spacing(3)},posts:{marginTop:e.spacing(2),padding:e.spacing(3),maxHeight:"500px",overflow:"auto",margin:e.spacing(3)},fab:Object(o.a)({position:"absolute",bottom:e.spacing(3),right:e.spacing(3)},e.breakpoints.down("xs"),{bottom:e.spacing(2),right:e.spacing(2)})}})))(de),fe=function(e){Object(v.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={settings:null,error:null},e.handleSubmit=function(){var t=Object(F.a)(A.a.mark((function t(a){return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,V("/api/settings",{method:"PUT",body:JSON.stringify(a)});case 3:return t.next=5,e.getSettings();case 5:alert("Settings saved successfully"),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),e.setState({error:t.t0});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.getSettings()}},{key:"getSettings",value:function(){var e=Object(F.a)(A.a.mark((function e(){var t,a,n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V("/api/settings",{method:"GET"});case 3:t=e.sent,a=Object(E.a)(t,1),n=a[0],this.setState({settings:n}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),this.setState({error:e.t0});case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;if(this.props.authState.isPending||this.state.loading)return r.a.createElement(J,null);var t=this.props,a=t.history,n=t.classes;return r.a.createElement(g.a,{variant:"h4",align:"center"},r.a.createElement(q.b,{initialValues:this.state.settings,onSubmit:this.handleSubmit},(function(e){var t=e.handleSubmit;return r.a.createElement($.a,{className:n.card},r.a.createElement("form",{onSubmit:t},r.a.createElement(j.a,{className:n.cardContent},r.a.createElement(re.a,{className:n.root},r.a.createElement(g.a,{variant:"h5",component:"h3"},"Application Settings")),r.a.createElement(q.a,{name:"membershipFee",validate:te(K,X,Q(0))},(function(e){var t=e.input,a=e.meta;return r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,Object.assign({className:n.cardField,label:"Membership Fee ($)",autoFocus:!0},t)),a.error&&a.touched&&r.a.createElement("span",{style:{color:"red"}},a.error))})),r.a.createElement(q.a,{name:"lateFee",validate:te(K,X,Q(0))},(function(e){var t=e.input,a=e.meta;return r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,Object.assign({className:n.cardField,label:"Late Payment Fee ($)",autoFocus:!0},t)),a.error&&a.touched&&r.a.createElement("span",{style:{color:"red"}},a.error))}))),r.a.createElement(x.a,null,r.a.createElement(w.a,{size:"small",color:"primary",type:"submit"},"Save"),r.a.createElement(w.a,{size:"small",onClick:function(){return a.goBack()}},"Cancel"))))})),this.state.error&&r.a.createElement(W,{onClose:function(){return e.setState({error:null})},message:this.state.error.message}))}}]),a}(r.a.Component),ge=Object(U.a)(p.withOktaAuth,m.o,Object(l.a)((function(e){return{card:{width:"90%",maxWidth:500},cardContent:{display:"flex",flexDirection:"column"},cardField:{marginTop:e.spacing(2)},marginTop:{marginTop:e.spacing(2)}}})))(fe),be=a(468),Ee=a(469),ye=a(478),ke=function(e){Object(v.a)(a,e);var t=Object(f.a)(a);function a(e){return Object(h.a)(this,a),t.call(this,e)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.locationV,n=e.onSave,c=e.history,i=e.readOnly;return r.a.createElement(q.b,{initialValues:a,onSubmit:n},(function(e){var a=e.handleSubmit;return r.a.createElement(ye.a,{className:t.modal,onClose:function(){return c.goBack()},open:!0},r.a.createElement($.a,{className:t.modalCard},r.a.createElement("form",{onSubmit:a},r.a.createElement(j.a,{className:t.modalCardContent},r.a.createElement(q.a,{name:"name",validate:K},(function(e){var t=e.input,a=e.meta;return r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,Object.assign({label:"Name of the location",disabled:i},t)),a.error&&a.touched&&r.a.createElement("span",{style:{color:"red"}},a.error))})),r.a.createElement(q.a,{name:"capacity",validate:te(K,X,Q(1))},(function(e){var t=e.input,a=e.meta;return r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,Object.assign({label:"Capacity of Vehicles",disabled:i},t)),a.error&&a.touched&&r.a.createElement("span",{style:{color:"red"}},a.error))})),r.a.createElement(q.a,{name:"address",validate:K},(function(e){var t=e.input,a=e.meta;return r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,Object.assign({label:"Address",multiline:!0,rows:4,disabled:i},t)),a.error&&a.touched&&r.a.createElement("span",{style:{color:"red"}},a.error))}))),i?r.a.createElement(x.a,null,r.a.createElement(w.a,{size:"small",onClick:function(){return c.goBack()}},"Close")):r.a.createElement(x.a,null,r.a.createElement(w.a,{size:"small",color:"primary",type:"submit"},"Save"),r.a.createElement(w.a,{size:"small",onClick:function(){return c.goBack()}},"Cancel")))))}))}}]),a}(r.a.Component),Oe=Object(U.a)(p.withOktaAuth,m.o,Object(l.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},modalCard:{width:"60%",maxWidth:800},modalCardContent:{display:"flex",flexDirection:"column"},marginTop:{marginTop:e.spacing(2)}}})))(ke),je=function(e){Object(v.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).state={loading:!0,locations:[],error:null},e.saveLocation=function(){var t=Object(F.a)(A.a.mark((function t(a){var n,r;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n={name:a.name,address:a.address,capacity:a.capacity},a._id&&(n=D(n)),r=a._id?"/api/locations/".concat(a._id):"/api/locations",t.next=6,V(r,{method:a._id?"PATCH":"POST",body:JSON.stringify(n)});case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),e.setState({error:t.t0});case 11:e.props.history.goBack(),e.getLocations();case 13:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}(),e.deleteLocation=function(){var t=Object(F.a)(A.a.mark((function t(a){return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Are you sure you want to delete?")){t.next=11;break}return t.prev=1,t.next=4,V("/api/locations/".concat(a),{method:"DELETE"});case 4:return t.next=6,e.getLocations();case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e.setState({error:t.t0});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}(),e.renderEditor=function(t){var a=t.match.params.id;if(e.state.loading)return null;var n=e.state.locations.find((function(e){return e._id===a}));return n||n||"new"===a?r.a.createElement(Oe,{locationV:n,onSave:e.saveLocation}):r.a.createElement(m.c,{to:"/locations"})},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.getLocations()}},{key:"getLocations",value:function(){var e=Object(F.a)(A.a.mark((function e(){var t;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V("/api/locations",{method:"GET"});case 3:t=e.sent,this.setState({loading:!1,locations:t}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.setState({loading:!1,error:e.t0});case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;if(this.props.authState.isPending||this.state.loading)return r.a.createElement(J,null);var t=this.props.classes;return r.a.createElement(n.Fragment,null,r.a.createElement(g.a,{variant:"h5"},"Locations"),this.state.locations.length>0?r.a.createElement(re.a,{elevation:1,className:t.posts},r.a.createElement(ce.a,null,this.state.locations.map((function(t){return r.a.createElement(ie.a,{key:t._id,button:!0,component:u.Link,to:"/locations/".concat(t._id)},r.a.createElement(oe.a,{primary:t.name,secondary:"Capacity : ".concat(t.capacity)}),r.a.createElement(oe.a,{primary:"Address: ".concat(t.address)}),r.a.createElement(w.a,{size:"small",color:"primary",onClick:function(a){a.preventDefault(),e.deleteLocation(t._id)}},"Delete"))})))):!this.state.loading&&r.a.createElement(g.a,{variant:"subtitle1"},"No locations to display"),r.a.createElement(be.a,{color:"secondary","aria-label":"add",className:t.fab,component:u.Link,to:"/locations/new"},r.a.createElement(Ee.a,null)),r.a.createElement(m.d,{exact:!0,path:"/locations/:id",render:this.renderEditor}),this.state.error&&r.a.createElement(W,{onClose:function(){return e.setState({error:null})},message:this.state.error.message}))}}]),a}(n.Component),Se=Object(U.a)(p.withOktaAuth,m.o,Object(l.a)((function(e){return{posts:{marginTop:e.spacing(2),padding:e.spacing(3),maxHeight:"500px",overflow:"auto",margin:"40px"},fab:Object(o.a)({position:"absolute",bottom:e.spacing(3),right:e.spacing(3)},e.breakpoints.down("xs"),{bottom:e.spacing(2),right:e.spacing(2)})}})))(je),xe=a(482),we=function(e){Object(v.a)(a,e);var t=Object(f.a)(a);function a(e){return Object(h.a)(this,a),t.call(this,e)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.vehicle,n=e.onSave,c=e.history,i=e.readOnly,o=e.vehicleTypes,s=e.locations;return r.a.createElement(q.b,{initialValues:a,onSubmit:n},(function(e){var a=e.handleSubmit;return r.a.createElement(ye.a,{className:t.modal,onClose:function(){return c.goBack()},open:!0},r.a.createElement($.a,{className:t.modalCard},r.a.createElement("form",{onSubmit:a},r.a.createElement(j.a,{className:t.modalCardContent},r.a.createElement(q.a,{name:"vehicleTypeId",validate:K},(function(e){var t=e.input,a=e.meta;return r.a.createElement(r.a.Fragment,null,r.a.createElement(xe.a,{id:"demo-simple-select-label"},"Type Of Vehicle"),r.a.createElement(se.a,Object.assign({labelId:"demo-simple-select-label",id:"demo-simple-select",disabled:i,autoFocus:!0},t),o.map((function(e){return r.a.createElement(le.a,{value:e._id},e.name)}))),a.error&&a.touched&&r.a.createElement("span",{style:{color:"red"}},a.error))})),r.a.createElement(q.a,{name:"make",validate:K},(function(e){var t=e.input,a=e.meta;return r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,Object.assign({label:"Make of the vehicle",disabled:i},t)),a.error&&a.touched&&r.a.createElement("span",{style:{color:"red"}},a.error))})),r.a.createElement(q.a,{name:"model",validate:K},(function(e){var t=e.input,a=e.meta;return r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,Object.assign({label:"Model of the Vehicle",disabled:i},t)),a.error&&a.touched&&r.a.createElement("span",{style:{color:"red"}},a.error))})),r.a.createElement(q.a,{name:"locationId",validate:K},(function(e){var t=e.input,a=e.meta;return r.a.createElement(r.a.Fragment,null,r.a.createElement(xe.a,{id:"demo-simple-select-label"},"Location Of Vehicle"),r.a.createElement(se.a,Object.assign({labelId:"demo-simple-select-label",id:"demo-simple-select",disabled:i,autoFocus:!0},t),s.map((function(e){return r.a.createElement(le.a,{value:e._id},e.name)}))),a.error&&a.touched&&r.a.createElement("span",{style:{color:"red"}},a.error))})),r.a.createElement(q.a,{name:"licencePlateNumber"},(function(e){var t=e.input;return r.a.createElement(S.a,Object.assign({label:"Licence Plate Number",disabled:i},t))})),r.a.createElement(q.a,{name:"mileage"},(function(e){var t=e.input;return r.a.createElement(S.a,Object.assign({label:"Mileage",disabled:i},t))})),r.a.createElement(q.a,{name:"stateOfRegistration"},(function(e){var t=e.input;return r.a.createElement(S.a,Object.assign({label:"State Of Registration",disabled:i},t))})),r.a.createElement(q.a,{name:"condition"},(function(e){var t=e.input;return r.a.createElement(S.a,Object.assign({label:"Vehicle Condition",disabled:i},t))}))),i?r.a.createElement(x.a,null,r.a.createElement(w.a,{size:"small",onClick:function(){return c.goBack()}},"Close")):r.a.createElement(x.a,null,r.a.createElement(w.a,{size:"small",color:"primary",type:"submit"},"Save"),r.a.createElement(w.a,{size:"small",onClick:function(){return c.goBack()}},"Cancel")))))}))}}]),a}(r.a.Component),Ce=Object(U.a)(p.withOktaAuth,m.o,Object(l.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},modalCard:{width:"60%",maxWidth:800},modalCardContent:{display:"flex",flexDirection:"column"},marginTop:{marginTop:e.spacing(2)}}})))(we),Te=function(e){Object(v.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).state={loading:!0,vehicles:[],vehicleTypes:[],locations:[],error:null},e.saveVehicle=function(){var t=Object(F.a)(A.a.mark((function t(a){var n,r;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n={make:a.make,model:a.model,locationId:a.locationId,vehicleTypeId:a.vehicleTypeId,licencePlateNumber:a.licencePlateNumber,stateOfRegistration:a.stateOfRegistration,condition:a.condition,mileage:a.mileage},a._id&&(n=D(n)),r=a._id?"/api/vehicles/".concat(a._id):"/api/vehicles",t.next=6,V(r,{method:a._id?"PATCH":"POST",body:JSON.stringify(n)});case 6:e.props.history.goBack(),e.getVehicles(),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),e.setState({error:t.t0});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}(),e.deleteVehicle=function(){var t=Object(F.a)(A.a.mark((function t(a){return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Are you sure you want to delete?")){t.next=5;break}return t.next=3,V("/api/vehicles/".concat(a),{method:"DELETE"});case 3:return t.next=5,e.getVehicles();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.renderEditor=function(t){var a=t.match.params.id;if(e.state.loading)return null;var n=e.state.vehicles.find((function(e){return e._id===a}));return n||n||"new"===a?r.a.createElement(Ce,{vehicle:n,vehicleTypes:e.state.vehicleTypes,locations:e.state.locations,onSave:e.saveVehicle}):r.a.createElement(m.c,{to:"/vehicles"})},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.getVehicles()}},{key:"getVehicles",value:function(){var e=Object(F.a)(A.a.mark((function e(){var t,a,n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V("/api/locations",{method:"GET"});case 3:return t=e.sent,e.next=6,V("/api/vehicleTypes",{method:"GET"});case 6:return a=e.sent,e.next=9,V("/api/vehicles",{method:"GET"});case 9:n=e.sent,this.setState({loading:!1,vehicles:n,vehicleTypes:a,locations:t}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),this.setState({error:e.t0});case 16:case"end":return e.stop()}}),e,this,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;if(this.props.authState.isPending||this.state.loading)return r.a.createElement(J,null);var t=this.props.classes;return r.a.createElement(n.Fragment,null,r.a.createElement(g.a,{variant:"h5"},"Vehicles"),this.state.vehicles.length>0?r.a.createElement(re.a,{elevation:1,className:t.posts},r.a.createElement(ce.a,null,this.state.vehicles.map((function(t){var a=e.state.vehicleTypes.find((function(e){return e._id===t.vehicleTypeId})),n=e.state.locations.find((function(e){return e._id===t.locationId}));return r.a.createElement(ie.a,{key:t._id,button:!0,component:u.Link,to:"/vehicles/".concat(t._id)},r.a.createElement(oe.a,{primary:t.make,secondary:t.model}),r.a.createElement(oe.a,{primary:a?a.name:"",secondary:n?n.name:""}),r.a.createElement(w.a,{size:"small",color:"primary",onClick:function(a){a.preventDefault(),e.deleteVehicle(t._id)}},"Delete"))})))):!this.state.loading&&r.a.createElement(g.a,{variant:"subtitle1"},"No vehicles to display"),r.a.createElement(be.a,{color:"secondary","aria-label":"add",className:t.fab,component:u.Link,to:"/vehicles/new"},r.a.createElement(Ee.a,null)),r.a.createElement(m.d,{exact:!0,path:"/vehicles/:id",render:this.renderEditor}),this.state.error&&r.a.createElement(W,{onClose:function(){return e.setState({error:null})},message:this.state.error.message}))}}]),a}(n.Component),Ne=Object(U.a)(p.withOktaAuth,m.o,Object(l.a)((function(e){return{posts:{marginTop:e.spacing(2),padding:e.spacing(3),maxHeight:"500px",overflow:"auto",margin:"40px"},fab:Object(o.a)({position:"absolute",bottom:e.spacing(3),right:e.spacing(3)},e.breakpoints.down("xs"),{bottom:e.spacing(2),right:e.spacing(2)})}})))(Te),Ae=a(470),Fe=function(e){Object(v.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={loading:!0,users:[],error:null},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.getUsers()}},{key:"getUsers",value:function(){var e=Object(F.a)(A.a.mark((function e(){var t;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V("/api/users",{method:"GET"});case 3:t=e.sent,this.setState({loading:!1,users:t}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.setState({error:e.t0});case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"revokeMembership",value:function(){var e=Object(F.a)(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you want to revoke user?")){e.next=5;break}return e.next=3,V("/api/users/".concat(t.id),{method:"DELETE"});case 3:return e.next=5,this.getUsers();case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;if(this.props.authState.isPending||this.state.loading)return r.a.createElement(J,null);var t=this.props.classes;return r.a.createElement(n.Fragment,null,r.a.createElement(g.a,{variant:"h5"},"Users"),this.state.users.length>0?r.a.createElement(re.a,{elevation:1,className:t.posts},r.a.createElement(ce.a,null,this.state.users.map((function(t){return r.a.createElement(ie.a,{key:t.profile.email},r.a.createElement(oe.a,{primary:t.profile.firstName,secondary:t.profile.lastName}),r.a.createElement(oe.a,{primary:t.profile.email}),r.a.createElement(Ae.a,null,r.a.createElement(w.a,{onClick:function(){return e.revokeMembership(t)},color:"inherit"},"Revoke")))})))):!this.state.loading&&r.a.createElement(g.a,{variant:"subtitle1"},"No users to display"),this.state.error&&r.a.createElement(W,{onClose:function(){return e.setState({error:null})},message:this.state.error.message}))}}]),a}(n.Component),Le=Object(U.a)(p.withOktaAuth,m.o,Object(l.a)((function(e){return{posts:{marginTop:e.spacing(2),maxHeight:"580px",overflow:"auto",margin:"50px"},fab:Object(o.a)({position:"absolute",bottom:e.spacing(3),right:e.spacing(3)},e.breakpoints.down("xs"),{bottom:e.spacing(2),right:e.spacing(2)})}})))(Fe),Be=function(e){Object(v.a)(a,e);var t=Object(f.a)(a);function a(e){return Object(h.a)(this,a),t.call(this,e)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.vehicleType,n=e.onSave,c=e.history,i=e.readOnly;return r.a.createElement(q.b,{initialValues:a,onSubmit:n},(function(e){var a=e.handleSubmit;return r.a.createElement(ye.a,{className:t.modal,onClose:function(){return c.goBack()},open:!0},r.a.createElement($.a,{className:t.modalCard},r.a.createElement("form",{onSubmit:a},r.a.createElement(j.a,{className:t.modalCardContent},r.a.createElement(q.a,{name:"name",validate:K},(function(e){var t=e.input,a=e.meta;return r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,Object.assign({label:"Type of vehicle",disabled:i},t)),a.error&&a.touched&&r.a.createElement("span",{style:{color:"red"}},a.error))})),r.a.createElement(q.a,{name:"description"},(function(e){var t=e.input;return r.a.createElement(S.a,Object.assign({label:"Vehicle Class Description",disabled:i},t))})),r.a.createElement(q.a,{name:"rate1",validate:te(K,X,Q(0))},(function(e){var t=e.input,a=e.meta;return r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,Object.assign({label:"Rate #1",disabled:i},t)),a.error&&a.touched&&r.a.createElement("span",{style:{color:"red"}},a.error))})),r.a.createElement(q.a,{name:"start1",validate:te(K,X,Q(0))},(function(e){var t=e.input,a=e.meta;return r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,Object.assign({label:"Start Hour #1",disabled:i},t)),a.error&&a.touched&&r.a.createElement("span",{style:{color:"red"}},a.error))})),r.a.createElement(q.a,{name:"end1",validate:te(K,X,Q(0),Z(72))},(function(e){var t=e.input,a=e.meta;return r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,Object.assign({label:"End Hour #1",disabled:i},t)),a.error&&a.touched&&r.a.createElement("span",{style:{color:"red"}},a.error))})),r.a.createElement(q.a,{name:"rate2",validate:te(X,Q(0))},(function(e){var t=e.input,a=e.meta;return r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,Object.assign({label:"Rate #2",disabled:i},t)),a.error&&a.touched&&r.a.createElement("span",{style:{color:"red"}},a.error))})),r.a.createElement(q.a,{name:"start2",validate:te(X,Q(0))},(function(e){var t=e.input,a=e.meta;return r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,Object.assign({label:"Start Hour #2",disabled:i},t)),a.error&&a.touched&&r.a.createElement("span",{style:{color:"red"}},a.error))})),r.a.createElement(q.a,{name:"end2",validate:te(X,Q(0),Z(72))},(function(e){var t=e.input,a=e.meta;return r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,Object.assign({label:"End Hour #2",disabled:i},t)),a.error&&a.touched&&r.a.createElement("span",{style:{color:"red"}},a.error))})),r.a.createElement(q.a,{name:"rate3",validate:te(X,Q(0))},(function(e){var t=e.input,a=e.meta;return r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,Object.assign({label:"Rate #3",disabled:i},t)),a.error&&a.touched&&r.a.createElement("span",{style:{color:"red"}},a.error))})),r.a.createElement(q.a,{name:"start3",validate:te(X,Q(0))},(function(e){var t=e.input,a=e.meta;return r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,Object.assign({label:"Start Hour #3",disabled:i},t)),a.error&&a.touched&&r.a.createElement("span",{style:{color:"red"}},a.error))})),r.a.createElement(q.a,{name:"end3",validate:te(X,Q(0),Z(72))},(function(e){var t=e.input,a=e.meta;return r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,Object.assign({label:"End Hour #3",disabled:i},t)),a.error&&a.touched&&r.a.createElement("span",{style:{color:"red"}},a.error))}))),i?r.a.createElement(x.a,null,r.a.createElement(w.a,{size:"small",onClick:function(){return c.goBack()}},"Close")):r.a.createElement(x.a,null,r.a.createElement(w.a,{size:"small",color:"primary",type:"submit"},"Save"),r.a.createElement(w.a,{size:"small",onClick:function(){return c.goBack()}},"Cancel")))))}))}}]),a}(r.a.Component),Ie=Object(U.a)(p.withOktaAuth,m.o,Object(l.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},modalCard:{width:"60%",maxWidth:800},modalCardContent:{display:"flex",flexDirection:"column"},marginTop:{marginTop:e.spacing(2)}}})))(Be),De=function(e){Object(v.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).state={loading:!0,vehicleTypes:[],error:null},e.saveVehicleType=function(){var t=Object(F.a)(A.a.mark((function t(a){var n,r;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n={name:a.name,description:a.description,rates:[]},a.rate1&&n.rates.push({rate:a.rate1,start:a.start1,end:a.end1}),a.rate2&&n.rates.push({rate:a.rate2,start:a.start2,end:a.end2}),a.rate3&&n.rates.push({rate:a.rate3,start:a.start3,end:a.end3}),a._id&&(n=D(n)),r=a._id?"/api/vehicleTypes/".concat(a._id):"/api/vehicleTypes",t.next=9,V(r,{method:a._id?"PATCH":"POST",body:JSON.stringify(n)});case 9:return t.next=11,e.getVehicleTypes();case 11:e.props.history.goBack(),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),e.setState({error:t.t0});case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e){return t.apply(this,arguments)}}(),e.deleteVehicleType=function(){var t=Object(F.a)(A.a.mark((function t(a){return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Are you sure you want to delete?")){t.next=11;break}return t.prev=1,t.next=4,V("/api/vehicleTypes/".concat(a),{method:"DELETE"});case 4:return t.next=6,e.getVehicleTypes();case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e.setState({error:t.t0});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}(),e.renderEditor=function(t){var a=t.match.params.id;if(e.state.loading)return null;var n=e.state.vehicleTypes.find((function(e){return e._id===a}));if(n){var c={},i=n.rates;return c.rate1=i[0]?i[0].rate:null,c.start1=i[0]?i[0].start:null,c.end1=i[0]?i[0].end:null,c.rate2=i[1]?i[1].rate:null,c.start2=i[1]?i[1].start:null,c.end2=i[1]?i[1].end:null,c.rate3=i[2]?i[2].rate:null,c.start3=i[2]?i[2].start:null,c.end3=i[2]?i[2].end:null,r.a.createElement(Ie,{vehicleType:Object(B.a)(Object(B.a)({},n),c),onSave:e.saveVehicleType})}return n||"new"===a?r.a.createElement(Ie,{vehicleType:n,onSave:e.saveVehicleType}):r.a.createElement(m.c,{to:"/vehicletype"})},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.getVehicleTypes()}},{key:"getVehicleTypes",value:function(){var e=Object(F.a)(A.a.mark((function e(){var t;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V("/api/vehicleTypes",{method:"GET"});case 3:t=e.sent,this.setState({loading:!1,vehicleTypes:t}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.setState({loading:!1,error:e.t0});case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;if(this.props.authState.isPending||this.state.loading)return r.a.createElement(J,null);var t=this.props.classes;return r.a.createElement(n.Fragment,null,r.a.createElement(g.a,{variant:"h5"},"Vehicle Types"),this.state.vehicleTypes.length>0?r.a.createElement(re.a,{elevation:1,className:t.posts},r.a.createElement(ce.a,null,this.state.vehicleTypes.map((function(t){return r.a.createElement(ie.a,{key:t._id,button:!0,component:u.Link,to:"/vehicletype/".concat(t._id)},r.a.createElement(oe.a,{primary:t.name,secondary:t.description}),r.a.createElement(oe.a,{primary:"Rate/hour: $".concat(t.rates[0]?t.rates[0].rate:"")}),r.a.createElement(w.a,{size:"small",color:"primary",onClick:function(a){a.preventDefault(),e.deleteVehicleType(t._id)}},"Delete"))})))):!this.state.loading&&r.a.createElement(g.a,{variant:"subtitle1"},"No vehicle types to display"),r.a.createElement(be.a,{color:"secondary","aria-label":"add",className:t.fab,component:u.Link,to:"/vehicletype/new"},r.a.createElement(Ee.a,null)),r.a.createElement(m.d,{exact:!0,path:"/vehicletype/:id",render:this.renderEditor}),this.state.error&&r.a.createElement(W,{onClose:function(){return e.setState({error:null})},message:this.state.error.message}))}}]),a}(n.Component),Ve=Object(U.a)(p.withOktaAuth,m.o,Object(l.a)((function(e){return{posts:{marginTop:e.spacing(2),padding:e.spacing(3),maxHeight:"500px",overflow:"auto",margin:"40px"},fab:Object(o.a)({position:"absolute",bottom:e.spacing(3),right:e.spacing(3)},e.breakpoints.down("xs"),{bottom:e.spacing(2),right:e.spacing(2)})}})))(De),Me=function(e){Object(v.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={loading:!0,booking:null,pricing:null,actualReturnTime:null,condition:null},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.getBookings()}},{key:"getBookings",value:function(){var e=Object(F.a)(A.a.mark((function e(){var t,a,n,r,c;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!this.props.authService){e.next=7;break}return e.next=4,this.props.authService.getUser();case 4:e.t0=e.sent,e.next=8;break;case 7:e.t0=null;case 8:return t=e.t0,e.next=11,V("/api/bookings/".concat(t.sub),{method:"GET"});case 11:if(a=e.sent,n=Object(E.a)(a,1),!(r=n[0])){e.next=21;break}return e.next=17,V("/api/vehicles/".concat(r.vehicleId),{method:"GET"});case 17:c=e.sent,this.setState({loading:!1,booking:Object(B.a)({vehicle:c},r)}),e.next=22;break;case 21:this.setState({loading:!1,booking:null});case 22:e.next=27;break;case 24:e.prev=24,e.t1=e.catch(0),this.setState({loading:!1,error:e.t1});case 27:case"end":return e.stop()}}),e,this,[[0,24]])})));return function(){return e.apply(this,arguments)}}()},{key:"getPrice",value:function(){var e=Object(F.a)(A.a.mark((function e(t){var a,n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=8;break}return e.next=4,V("/api/bookings/".concat(this.state.booking._id,"/price/").concat((new Date).toISOString()),{method:"GET"});case 4:a=e.sent,this.setState({pricing:a}),e.next=16;break;case 8:if(!this.state.actualReturnTime){e.next=15;break}return e.next=11,V("/api/bookings/".concat(this.state.booking._id,"/price/").concat(this.state.actualReturnTime.toISOString()),{method:"GET"});case 11:n=e.sent,this.setState({pricing:n}),e.next=16;break;case 15:this.setState({error:{message:"Please select date on which vehicle was returned"}});case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),this.setState({error:e.t0});case 21:case"end":return e.stop()}}),e,this,[[0,18]])})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteBooking",value:function(){var e=Object(F.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V("/api/bookings/".concat(this.state.booking._id),{method:"DELETE"});case 3:return e.next=5,this.getBookings();case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.setState({error:e.t0});case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;if(this.props.authState.isPending||this.state.loading)return r.a.createElement(J,null);var t=this.props.classes;return r.a.createElement("div",{className:t.mainContainer},this.state.booking?r.a.createElement($.a,{className:t.modalCard},r.a.createElement(j.a,null,r.a.createElement(g.a,{color:"textSecondary",gutterBottom:!0},"Vehicle"),r.a.createElement(g.a,{variant:"h5",gutterBottom:!0},this.state.booking.vehicle?"".concat(this.state.booking.vehicle.make," ").concat(this.state.booking.vehicle.model):""),r.a.createElement(g.a,{color:"textSecondary",gutterBottom:!0},"Booking Start Time"),r.a.createElement(g.a,{variant:"h5",gutterBottom:!0},new Date(this.state.booking.startTime).toLocaleString()),r.a.createElement(g.a,{color:"textSecondary",gutterBottom:!0},"Booking Return Time"),r.a.createElement(g.a,{variant:"h5",gutterBottom:!0},new Date(this.state.booking.endTime).toLocaleString()),r.a.createElement(g.a,{color:"textSecondary",gutterBottom:!0},"Select return Time"),r.a.createElement(me.a,{className:t.dateInput,selected:this.state.actualReturnTime?this.state.actualReturnTime:null,showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:60,timeCaption:"time",dateFormat:"MMMM d, yyyy h:mm aa",placeholderText:"Select return time",onChange:function(t){e.setState({actualReturnTime:t})}}),r.a.createElement(g.a,{color:"textSecondary",gutterBottom:!0},"Condition At Return/Comments"),r.a.createElement(S.a,{value:this.state.value,onChange:function(t){e.setState({condition:t})}}),r.a.createElement(x.a,null,r.a.createElement(w.a,{variant:"contained",onClick:function(){e.getPrice(!0)}},"Cancel Booking"),r.a.createElement(w.a,{variant:"contained",color:"primary",onClick:function(){e.getPrice()}},"Return Vehicle"))),this.state.pricing?r.a.createElement(j.a,null,r.a.createElement(g.a,{color:"textSecondary",gutterBottom:!0},"Total Price that will be charged to your card"),r.a.createElement(g.a,{variant:"h5",gutterBottom:!0},this.state.pricing?"".concat(Math.round(this.state.pricing.totalPrice)):""),r.a.createElement(g.a,{color:"textSecondary",gutterBottom:!0},"Hours"),r.a.createElement(g.a,{variant:"h5",gutterBottom:!0},this.state.pricing?"".concat(Math.round(this.state.pricing.totalHours)):""),r.a.createElement(g.a,{color:"textSecondary",gutterBottom:!0},"Late Fee"),r.a.createElement(g.a,{variant:"h5",gutterBottom:!0},this.state.pricing?"".concat(Math.round(this.state.pricing.lateFee)):""),r.a.createElement(x.a,null,r.a.createElement(w.a,{variant:"contained",onClick:function(){e.setState({pricing:null})}},"Cancel"),r.a.createElement(w.a,{variant:"contained",color:"primary",onClick:function(){e.deleteBooking()}},"Confirm"))):null):r.a.createElement(g.a,{variant:"subtitle1"},"No current booking found"),this.state.error&&r.a.createElement(W,{onClose:function(){return e.setState({error:null})},message:this.state.error.message}))}}]),a}(n.Component),Re=Object(U.a)(p.withOktaAuth,Object(l.a)((function(e){return{mainContainer:{margin:e.spacing(3)},posts:{marginTop:e.spacing(2),padding:e.spacing(3),maxHeight:"500px",overflow:"auto",margin:e.spacing(3)},fab:Object(o.a)({position:"absolute",bottom:e.spacing(3),right:e.spacing(3)},e.breakpoints.down("xs"),{bottom:e.spacing(2),right:e.spacing(2)}),dateInput:{height:"35px"}}})))(Me),Pe=a(472),_e=a(473),He=a(476),Ue=a(474),ze=a(212),Ge=a(471),We=Object(p.withOktaAuth)(function(e){Object(v.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={authenticated:null,user:null,menuAnchorEl:null},e.login=function(){return e.props.auth.login()},e.logout=function(){e.handleMenuClose(),e.props.authService.logout()},e.handleMenuOpen=function(t){return e.setState({menuAnchorEl:t.currentTarget})},e.handleMenuClose=function(){return e.setState({menuAnchorEl:null})},e}return Object(d.a)(a,[{key:"componentDidUpdate",value:function(){this.checkAuthentication()}},{key:"componentDidMount",value:function(){this.checkAuthentication()}},{key:"checkAuthentication",value:function(){var e=Object(F.a)(A.a.mark((function e(){var t,a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=!!this.props.authState&&this.props.authState.isAuthenticated)===this.state.authenticated){e.next=6;break}return e.next=4,this.props.authService.getUser();case 4:a=e.sent,this.setState({authenticated:t,user:a});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.authenticated,a=e.user,n=e.menuAnchorEl;if(null===t)return null;if(!t)return r.a.createElement(w.a,{color:"inherit",component:u.Link,to:"/login"},"Login");var c={vertical:"top",horizontal:"right"};return r.a.createElement("div",null,r.a.createElement(P.a,{onClick:this.handleMenuOpen,color:"inherit"},r.a.createElement(Ge.a,null)),r.a.createElement(ze.a,{anchorEl:n,anchorOrigin:c,transformOrigin:c,open:!!n,onClose:this.handleMenuClose},r.a.createElement(le.a,{onClick:this.logout},r.a.createElement(oe.a,{primary:"Logout",secondary:a&&a.name}))))}}]),a}(n.Component)),Je=function(e){Object(v.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={authenticated:!1,user:null,role:"admin",value:0},e.handleChange=function(t,a){e.setState({value:a})},e}return Object(d.a)(a,[{key:"componentDidUpdate",value:function(){this.checkAuthentication()}},{key:"componentDidMount",value:function(){this.checkAuthentication()}},{key:"checkAuthentication",value:function(){var e=Object(F.a)(A.a.mark((function e(){var t,a,n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!!this.props.authState&&this.props.authState.isAuthenticated,!this.props.authService){e.next=7;break}return e.next=4,this.props.authService.getUser();case 4:e.t0=e.sent,e.next=8;break;case 7:e.t0=null;case 8:a=e.t0,n=a&&a.groups&&a.groups.includes("CarRentalApp Admin")?"admin":"user",t!==this.state.authenticated&&this.setState({authenticated:t,role:n});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(Pe.a,{position:"static"},r.a.createElement(_e.a,null,r.a.createElement(g.a,{variant:"h6",color:"inherit"},"Car Rental System"),this.state.authenticated?r.a.createElement(r.a.Fragment,null,"admin"===this.state.role?r.a.createElement(He.a,null,r.a.createElement(Ue.a,{key:"profile",label:"Home",component:u.Link,className:this.props.classes.tabLink,to:"/"}),r.a.createElement(Ue.a,{key:"vehicletype",label:"Vehicle Types",component:u.Link,className:this.props.classes.tabLink,to:"/vehicletype"}),r.a.createElement(Ue.a,{key:"settings",label:"Settings",component:u.Link,className:this.props.classes.tabLink,to:"/settings"}),r.a.createElement(Ue.a,{key:"locations",label:"Locations",component:u.Link,className:this.props.classes.tabLink,to:"/locations"}),r.a.createElement(Ue.a,{key:"vehicles",label:"Vehicles",component:u.Link,className:this.props.classes.tabLink,to:"/vehicles"}),r.a.createElement(Ue.a,{key:"users",label:"Users",component:u.Link,className:this.props.classes.tabLink,to:"/users"})):r.a.createElement(He.a,null,r.a.createElement(Ue.a,{key:"home",label:"Home",component:u.Link,className:this.props.classes.tabLink,to:"/"}),r.a.createElement(Ue.a,{key:"customervehicles",label:"Search Vehicles",component:u.Link,className:this.props.classes.tabLink,to:"/customervehicles"}),r.a.createElement(Ue.a,{key:"bookings",label:"My Bookings",component:u.Link,className:this.props.classes.tabLink,to:"/bookings"}),r.a.createElement(Ue.a,{key:"profile",label:"Profile",component:u.Link,className:this.props.classes.tabLink,to:"/profile"}))):null,r.a.createElement("div",{className:this.props.classes.flex}),r.a.createElement(We,null)))}}]),a}(r.a.Component),Ye=Object(m.o)(Object(p.withOktaAuth)(Object(l.a)({flex:{flex:1},tabLink:{display:"flex",alignItems:"center"}})(Je))),$e=function(){var e=Object(m.k)();return r.a.createElement(p.Security,{issuer:O.issuer,pkce:!1,cookies:O.cookies,clientId:O.client_id,redirectUri:window.location.origin+"/implicit/callback",onAuthRequired:function(){e.push("/login")}},r.a.createElement(Ye,null),r.a.createElement(p.SecureRoute,{path:"/",exact:!0,component:b}),r.a.createElement(p.SecureRoute,{path:"/vehicletype",component:Ve}),r.a.createElement(p.SecureRoute,{path:"/settings",component:ge}),r.a.createElement(p.SecureRoute,{path:"/locations",component:Se}),r.a.createElement(p.SecureRoute,{path:"/vehicles",component:Ne}),r.a.createElement(p.SecureRoute,{path:"/users",component:Le}),r.a.createElement(p.SecureRoute,{path:"/customervehicles",component:ve}),r.a.createElement(p.SecureRoute,{path:"/bookings",component:Re}),r.a.createElement(p.SecureRoute,{path:"/profile",component:Y}),r.a.createElement(m.d,{path:"/login",render:function(){return r.a.createElement(T,{issuer:O.issuer})}}),r.a.createElement(m.d,{path:"/register",component:ae}),r.a.createElement(m.d,{path:"/implicit/callback",component:p.LoginCallback}))},qe=Object(l.a)((function(e){return{main:Object(o.a)({padding:e.spacing(0)},e.breakpoints.down("xs"),{padding:e.spacing(2)})}}))((function(e){var t=e.classes;return r.a.createElement(n.Fragment,null,r.a.createElement(s.a,null),r.a.createElement("main",{className:t.main},r.a.createElement(u.BrowserRouter,null,r.a.createElement($e,null))))}));i.a.render(r.a.createElement(qe,null),document.getElementById("root"))}},[[220,1,2]]]);
//# sourceMappingURL=main.c635e23f.chunk.js.map